# üé∞ –õ–û–¢–ï–†–ï–ô–ù–ê–Ø –°–ò–°–¢–ï–ú–ê "LOTO"

![License](https://img.shields.io/badge/license-MIT-blue.svg)
![PHP](https://img.shields.io/badge/PHP-8.3-blue.svg)
![Vue](https://img.shields.io/badge/Vue.js-3.0-green.svg)
![Docker](https://img.shields.io/badge/Docker-ready-blue.svg)

## üìã –û –ü–†–û–ï–ö–¢–ï

**Loto** - —ç—Ç–æ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–∞—è –ª–æ—Ç–µ—Ä–µ–π–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞, –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å **Telegram Mini Apps**. –°–∏—Å—Ç–µ–º–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ä–∞–∑–ª–∏—á–Ω—ã–µ —Ç–∏–ø—ã –ª–æ—Ç–µ—Ä–µ–π, –≤–∫–ª—é—á–∞—è –µ–∂–µ–¥–Ω–µ–≤–Ω—ã–µ, –¥–∂–µ–∫–ø–æ—Ç –∏ —Å—É–ø–µ—Ä—Ç—É—Ä –ª–æ—Ç–µ—Ä–µ–∏, —Å –ø–æ–ª–Ω–æ–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π –ø–ª–∞—Ç–µ–∂–Ω—ã—Ö —Å–∏—Å—Ç–µ–º.

### ‚ú® –û–°–ù–û–í–ù–´–ï –í–û–ó–ú–û–ñ–ù–û–°–¢–ò

- üé≠ **Telegram Mini App** –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- üéüÔ∏è **–ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —Ç–∏–ø—ã –ª–æ—Ç–µ—Ä–µ–π** (–¥–Ω–µ–≤–Ω—ã–µ, –¥–∂–µ–∫–ø–æ—Ç, —Å—É–ø–µ—Ä—Ç—É—Ä)
- üí≥ **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –ø–ª–∞—Ç–µ–∂–Ω—ã–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏** (FPGate)
- ü™ô **–í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –∏–≥—Ä–æ–≤—ã–µ –º–µ—Ö–∞–Ω–∏–∫–∏** (—Ç–∞–ø-–º–µ—Ö–∞–Ω–∏–∫–∞, –∫–æ–ª–µ—Å–æ —Ñ–æ—Ä—Ç—É–Ω—ã)
- üåê **–ú—É–ª—å—Ç–∏—è–∑—ã—á–Ω–æ—Å—Ç—å** (—Ä—É—Å—Å–∫–∏–π, —É–∑–±–µ–∫—Å–∫–∏–π)
- üèÜ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ä–æ–∑—ã–≥—Ä—ã—à–∏** –∏ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø—Ä–∏–∑–æ–≤
- üìä **–î–µ—Ç–∞–ª—å–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞** –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

---

## üèóÔ∏è –ê–†–•–ò–¢–ï–ö–¢–£–†–ê –°–ò–°–¢–ï–ú–´

```mermaid
graph TB
    subgraph "Frontend"
        TG[Telegram Mini App<br/>Vue.js + TypeScript]
    end
    
    subgraph "Backend Services"
        TM[Ticket Manager<br/>PHP Webman]
        US[User Service<br/>PHP Webman]
        PA[Payment Service<br/>FPGate Integration]
    end
    
    subgraph "Infrastructure"
        SI[Shared Infrastructure<br/>PostgreSQL + Redis + Kafka]
        NG[Nginx<br/>Load Balancer]
    end
    
    TG --> NG
    NG --> TM
    NG --> US
    TM --> SI
    US --> SI
    TM --> PA
    SI --> K[Kafka Topics]
    K --> DR[Draw Service<br/>External]
```

---

## üìÅ –°–¢–†–£–ö–¢–£–†–ê –ü–†–û–ï–ö–¢–ê

```
Loto/
‚îú‚îÄ‚îÄ üé≠ l-ms-telegram-app/     # Frontend - Telegram Mini App
‚îú‚îÄ‚îÄ üéüÔ∏è l-ms-ticket-manager/   # Backend - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–∏–ª–µ—Ç–∞–º–∏ –∏ –ª–æ—Ç–µ—Ä–µ—è–º–∏  
‚îú‚îÄ‚îÄ üë§ l-ms-user/             # Backend - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
‚îú‚îÄ‚îÄ üèóÔ∏è l-shared-infra/        # –û–±—â–∞—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (PostgreSQL, Redis, Kafka)
‚îú‚îÄ‚îÄ üìä ANALYSIS_REPORT.md     # –ü–æ–¥—Ä–æ–±–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –∏ –≤—ã—è–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã
‚îú‚îÄ‚îÄ üöÄ START.md               # –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –∑–∞–ø—É—Å–∫—É
‚îî‚îÄ‚îÄ üìñ README.md              # –≠—Ç–æ—Ç —Ñ–∞–π–ª
```

---

## üõ†Ô∏è –¢–ï–•–ù–û–õ–û–ì–ò–ß–ï–°–ö–ò–ô –°–¢–ï–ö

### Frontend (l-ms-telegram-app)
- **Vue.js 3** + **TypeScript** + **Vite**
- **Telegram Web App SDK** 
- **Pinia** –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º
- **Axios** –¥–ª—è HTTP –∑–∞–ø—Ä–æ—Å–æ–≤

### Backend (l-ms-ticket-manager, l-ms-user)  
- **PHP 8.3** + **Webman Framework**
- **PostgreSQL** –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- **Kafka** –¥–ª—è –º–µ–∂—Å–µ—Ä–≤–∏—Å–Ω–æ–≥–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è
- **Redis** –¥–ª—è –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è
- **JWT** –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è

### Infrastructure (l-shared-infra)
- **Docker** + **Docker Compose**
- **PostgreSQL 15**
- **Redis 7**  
- **Apache Kafka 3.4**
- **Nginx** reverse proxy

---

## üéÆ –ë–ò–ó–ù–ï–°-–õ–û–ì–ò–ö–ê

### üéØ –¢–ò–ü–´ –õ–û–¢–ï–†–ï–ô

| –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ | –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ |
|-----|----------|-------------|
| **–î–Ω–µ–≤–Ω–∞—è (–§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è)** | $100 –ø—Ä–∏–∑ | –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å—É–º–º–∞ –≤—ã–∏–≥—Ä—ã—à–∞ |
| **–î–Ω–µ–≤–Ω–∞—è (–î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è)** | –ü—Ä–∏–∑ –æ—Ç –±–∏–ª–µ—Ç–æ–≤ | –ü—Ä–∏–∑–æ–≤–æ–π —Ñ–æ–Ω–¥ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –ø—Ä–æ–¥–∞–∂ |
| **–î–∂–µ–∫–ø–æ—Ç** | 15-–¥–Ω–µ–≤–Ω–∞—è | –ù–∞–∫–æ–ø–∏—Ç–µ–ª—å–Ω—ã–π –ø—Ä–∏–∑ |  
| **–°—É–ø–µ—Ä—Ç—É—Ä** | –û–≥—Ä–∞–Ω–∏—á–µ–Ω–æ –±–∏–ª–µ—Ç–æ–≤ | –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø—Ä–∏–∑–æ–≤–æ–π —Ñ–æ–Ω–¥ |

### ü™ô –ò–ì–†–û–í–´–ï –ú–ï–•–ê–ù–ò–ö–ò
- **–¢–∞–ø-–º–µ—Ö–∞–Ω–∏–∫–∞**: –î–æ 5 —Ç–∞–ø–æ–≤ –≤ –¥–µ–Ω—å = 5 –º–æ–Ω–µ—Ç
- **–ö–æ–ª–µ—Å–æ —Ñ–æ—Ä—Ç—É–Ω—ã**: –†–∞–∑ –≤ 3 —á–∞—Å–∞, –ø—Ä–∏–∑—ã: –±–∏–ª–µ—Ç—ã/–º–æ–Ω–µ—Ç—ã
- **–í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –≤–∞–ª—é—Ç–∞**: –ú–æ–∂–Ω–æ –ø–æ–∫—É–ø–∞—Ç—å –±–∏–ª–µ—Ç—ã –∑–∞ –º–æ–Ω–µ—Ç—ã

---

## üöÄ –ë–´–°–¢–†–´–ô –°–¢–ê–†–¢

> üìò **–ü–æ–¥—Ä–æ–±–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏**: –°–º. [START.md](./START.md)

```bash
# 1. –ó–∞–ø—É—Å—Ç–∏—Ç—å –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—É
cd l-shared-infra && docker-compose up -d

# 2. –ó–∞–ø—É—Å—Ç–∏—Ç—å –±—ç–∫–µ–Ω–¥ —Å–µ—Ä–≤–∏—Å—ã  
cd ../l-ms-ticket-manager && make up
cd ../l-ms-user && make up

# 3. –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥
cd ../l-ms-telegram-app/app && npm run dev
```

---

## üìä –°–¢–ê–¢–£–° –†–ê–ó–†–ê–ë–û–¢–ö–ò

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –°—Ç–∞—Ç—É—Å | –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å | –ó–∞–º–µ—á–∞–Ω–∏—è |
|-----------|---------|------------|-----------||
| **Frontend** | ‚úÖ Ready | 90% | –ü–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π |
| **User Service** | ‚úÖ Ready | 85% | –ë–∞–∑–æ–≤—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –≥–æ—Ç–æ–≤ |  
| **Ticket Manager** | ‚ö†Ô∏è Development | 70% | **–°–æ–¥–µ—Ä–∂–∏—Ç –∑–∞–≥–ª—É—à–∫–∏** |
| **Infrastructure** | ‚úÖ Ready | 95% | Production ready |

> ‚ö†Ô∏è **–í–ê–ñ–ù–û**: –°–∏—Å—Ç–µ–º–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç —Ç–µ—Å—Ç–æ–≤—ã–µ –∑–∞–≥–ª—É—à–∫–∏ –∏ –Ω–µ –≥–æ—Ç–æ–≤–∞ –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É. –°–º. [ANALYSIS_REPORT.md](./ANALYSIS_REPORT.md)

---

## üîß –†–ê–ó–†–ê–ë–û–¢–ö–ê

### –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
- **Docker** 20.0+
- **Docker Compose** 2.0+
- **Node.js** 18+ (–¥–ª—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞)
- **PHP** 8.3+ (–¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)

### –õ–æ–∫–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
```bash
# –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
git clone <repository> loto
cd loto

# –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞
cd l-shared-infra
docker-compose up -d

# –°–º. START.md –¥–ª—è –¥–µ—Ç–∞–ª—å–Ω—ã—Ö –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π
```

### –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã
```bash
# –õ–æ–≥–∏ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
make logs

# –ú–∏–≥—Ä–∞—Ü–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö  
make migrate

# –¢–µ—Å—Ç—ã
make test

# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ Kafka
open http://localhost:81
```

---

## üõ°Ô∏è –ë–ï–ó–û–ü–ê–°–ù–û–°–¢–¨

- üîê **JWT –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è** —á–µ—Ä–µ–∑ Telegram
- üîí **HMAC-SHA256** –ø–æ–¥–ø–∏—Å–∏ –¥–ª—è –ø–ª–∞—Ç–µ–∂–µ–π  
- ‚ö° **Rate limiting** –¥–ª—è API endpoints
- üîç **Input validation** –Ω–∞ –≤—Å–µ—Ö —É—Ä–æ–≤–Ω—è—Ö
- üìù **–î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π

---

## üìà –ú–û–ù–ò–¢–û–†–ò–ù–ì –ò –ù–ê–ë–õ–Æ–î–ê–ï–ú–û–°–¢–¨  

### –î–æ—Å—Ç—É–ø–Ω—ã–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã:
- **Kafka UI**: http://localhost:81
- **PostgreSQL**: localhost:54320
- **Redis**: localhost:63790
- **Application logs**: `runtime/logs/` –≤ –∫–∞–∂–¥–æ–º —Å–µ—Ä–≤–∏—Å–µ

### Health Checks:
```bash  
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
curl http://localhost:8084/api/health  # Ticket Manager
curl http://localhost:8085/api/health  # User Service
```

---

## ü§ù –£–ß–ê–°–¢–ò–ï –í –†–ê–ó–†–ê–ë–û–¢–ö–ï

1. **Fork** —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
2. –°–æ–∑–¥–∞–π—Ç–µ **feature branch** (`git checkout -b feature/amazing-feature`)  
3. **Commit** –∏–∑–º–µ–Ω–µ–Ω–∏—è (`git commit -m 'Add amazing feature'`)
4. **Push** –≤ branch (`git push origin feature/amazing-feature`)
5. –û—Ç–∫—Ä–æ–π—Ç–µ **Pull Request**

### –°—Ç–∞–Ω–¥–∞—Ä—Ç—ã –∫–æ–¥–∞:
- **PSR-12** –¥–ª—è PHP
- **ESLint + Prettier** –¥–ª—è TypeScript
- **Conventional Commits** –¥–ª—è —Å–æ–æ–±—â–µ–Ω–∏–π

---

## üìû –ü–û–î–î–ï–†–ñ–ö–ê

- üìß **Email**: support@loto.example.com
- üí¨ **Telegram**: @loto_support
- üêõ **Issues**: [GitHub Issues](https://github.com/username/loto/issues)
- üìñ **Documentation**: –°–º. README —Ñ–∞–π–ª—ã –≤ –∫–∞–∂–¥–æ–º —Å–µ—Ä–≤–∏—Å–µ

---

## üìÑ –õ–ò–¶–ï–ù–ó–ò–Ø

Distributed under the MIT License. See `LICENSE` for more information.

---

## üîó –°–í–Ø–ó–ê–ù–ù–´–ï –î–û–ö–£–ú–ï–ù–¢–´

- üìä [ANALYSIS_REPORT.md](./ANALYSIS_REPORT.md) - –î–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –ø—Ä–æ–±–ª–µ–º –∏ –∑–∞–≥–ª—É—à–µ–∫
- üöÄ [START.md](./START.md) - –ü–æ—à–∞–≥–æ–≤—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –∑–∞–ø—É—Å–∫—É
- üèóÔ∏è [l-shared-infra/README.md](./l-shared-infra/README.md) - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã  
- üéüÔ∏è [l-ms-ticket-manager/README.md](./l-ms-ticket-manager/README.md) - API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- üë§ [l-ms-user/README.md](./l-ms-user/README.md) - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π —Å–µ—Ä–≤–∏—Å

---

<div align="center">
  <strong>üé∞ –°–¥–µ–ª–∞–Ω–æ —Å ‚ù§Ô∏è –∫–æ–º–∞–Ω–¥–æ–π Loto</strong>
</div>

---

<div align="center">
  <strong>üé∞ –°–¥–µ–ª–∞–Ω–æ —Å ‚ù§Ô∏è –∫–æ–º–∞–Ω–¥–æ–π Loto</strong>
</div>
